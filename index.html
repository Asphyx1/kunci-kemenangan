<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chronicles of Beryl: High School Romance</title>
    <style>
        /* --- CSS UTAMA --- */
        body { margin: 0; background: #1a1a1a; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
        
        #game-screen {
            width: 100vw; height: 100vh;
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: flex-end;
            transition: background-image 0.5s ease-in-out;
        }

        /* Karakter */
        #char-layer {
            position: absolute; bottom: 0; width: 100%; height: 100%;
            pointer-events: none; /* Agar bisa klik tembus ke belakang */
            display: flex; justify-content: center; align-items: flex-end;
        }
        .char-sprite { height: 85vh; filter: drop-shadow(0 0 10px rgba(0,0,0,0.5)); transition: opacity 0.3s; }

        /* UI Dialog */
        #ui-layer {
            background: linear-gradient(transparent, rgba(0,0,0,0.9));
            padding: 40px 100px;
            min-height: 200px;
            display: flex; flex-direction: column; gap: 10px;
            border-top: 3px solid #ffd700;
        }

        #name-box {
            background: #ffd700; color: #000; padding: 5px 20px;
            font-weight: 800; font-size: 1.5rem; width: fit-content;
            border-radius: 5px 20px 0 0; transform: translateY(15px);
        }

        #text-box {
            color: #fff; font-size: 1.3rem; line-height: 1.6;
            text-shadow: 1px 1px 2px black;
            min-height: 80px;
        }

        /* Tombol Pilihan */
        #choice-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            gap: 20px; z-index: 99; display: none;
        }
        
        .choice-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #ffd700; color: white;
            padding: 20px 40px; width: 60%; font-size: 1.2rem;
            cursor: pointer; transition: 0.2s;
            backdrop-filter: blur(5px);
        }
        .choice-btn:hover { background: #ffd700; color: black; transform: scale(1.05); }

        /* Indikator Lanjut */
        .next-indicator {
            animation: bounce 1s infinite; font-size: 0.8rem; color: #ffd700; align-self: flex-end; cursor: pointer;
        }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(5px); } }

    </style>
</head>
<body>

    <div id="game-screen">
        <div id="char-layer">
            </div>

        <div id="choice-overlay"></div>

        <div id="ui-layer" onclick="nextText()">
            <div id="name-box">Beryl</div>
            <div id="text-box">...</div>
            <div class="next-indicator">Klik spasi atau layar untuk lanjut â–¼</div>
        </div>
    </div>

<script>
// --- DATABASE GAMBAR (Ganti URL ini dengan link gambar anime/background asli) ---
const ASSETS = {
    bg_kamar: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?q=80&w=2158&auto=format&fit=crop",
    bg_jalan: "https://images.unsplash.com/photo-1577047424873-2c3736476370?q=80&w=2070&auto=format&fit=crop",
    bg_sekolah: "https://images.unsplash.com/photo-1580582932707-520aed937b7b?q=80&w=2664&auto=format&fit=crop",
    bg_kelas: "https://images.unsplash.com/photo-1518922667629-d9b177342422?q=80&w=2070&auto=format&fit=crop",
    
    // Placeholder Karakter (Ganti dengan gambar transparan PNG)
    char_alya: "https://cdn-icons-png.flaticon.com/512/4140/4140048.png", 
    char_bella: "https://cdn-icons-png.flaticon.com/512/4140/4140037.png"
};

// --- STATE GAME ---
let gameState = {
    stats: { alya: 0, bella: 0, cindy: 0, charisma: 0 },
    flags: { met_bella: false, late_first_day: false }, // Penanda kejadian
    history: [] // Untuk fitur log (optional)
};

// --- SKRIP CERITA (Disinilah kamu menulis novelnya) ---
const script = {
    // PROLOG: MEMBANGUN SUASANA (PACING LAMBAT)
    "start": [
        { bg: ASSETS.bg_kamar, speaker: "Beryl", text: "..." },
        { speaker: "Beryl", text: "Suara detak jam dinding terdengar begitu keras pagi ini." },
        { speaker: "Beryl", text: "Cahaya matahari menembus celah gorden kamarku. Debu-debu kecil terlihat menari-nari dalam sorotan cahaya itu." },
        { speaker: "Beryl", text: "Rasanya berat sekali membuka mata. Semester baru... kelas 2 SMA." },
        { speaker: "Beryl", text: "Orang bilang masa SMA adalah masa paling indah. Tapi bagiku, itu cuma rutinitas membosankan yang harus dijalani." },
        { speaker: "Beryl", text: "Aku melirik jam di meja..." },
        { speaker: "Beryl", text: "Jam 06:15. Masih ada waktu, tapi kalau aku tidur lagi, pasti kebablasan." },
        { 
            choice: [
                { text: "Bangun dan rapihkan tempat tidur (Rajin +1)", target: "rute_rajin" },
                { text: "Tidur 10 menit lagi... (Malas)", target: "rute_malas" }
            ] 
        }
    ],

    "rute_rajin": [
        { action: () => gameState.stats.charisma += 1 },
        { speaker: "Beryl", text: "Aku memaksakan diri untuk duduk. Meregangkan otot-otot yang kaku." },
        { speaker: "Beryl", text: "'Oke, Beryl. Jadilah manusia berguna hari ini,' gumamku pada diri sendiri." },
        { speaker: "Beryl", text: "Aku merapikan selimut dan bantal. Setidaknya kamarku terlihat layak huni sebelum aku tinggal." },
        { jump: "scene_dapur" }
    ],

    "rute_malas": [
        { action: () => gameState.flags.late_first_day = true },
        { speaker: "Beryl", text: "Kelopak mataku terlalu berat. Gravitasi kasur ini terlalu kuat..." },
        { speaker: "Beryl", text: "Hanya... sepuluh... menit..." },
        { speaker: "", text: "(Beberapa saat kemudian...)" }, // Narasi tanpa nama
        { speaker: "Ibu", text: "BERYL!! JAM BERAPA INI?!" },
        { speaker: "Beryl", text: "Hah?! Aku terlonjak kaget. Jam 06:45! Sialan!" },
        { jump: "scene_dapur" }
    ],

    "scene_dapur": [
        { bg: ASSETS.bg_kamar, speaker: "Beryl", text: "Setelah mandi kilat dan memakai seragam yang agak kusut, aku turun ke bawah." },
        { speaker: "Beryl", text: "Rumah sepi. Ayah dan Ibu sudah berangkat kerja. Hanya ada selembar roti tawar di meja dan uang saku." },
        { speaker: "Beryl", text: "Aku mengambil roti itu dan menggigitnya sambil memakai sepatu." },
        { speaker: "Beryl", text: "Rutinitas dimulai." },
        { bg: ASSETS.bg_jalan, speaker: "Beryl", text: "Udara pagi ini cukup dingin. Jalanan komplek masih agak lengang." },
        { speaker: "Beryl", text: "Langkah kakiku bergema di aspal. Aku berjalan sambil melamunkan game yang kumainkan semalam." },
        { speaker: "???", text: "BERYYYLLL!!" },
        { speaker: "Beryl", text: "Suara itu... suara cempreng yang sangat kuhafal sejak TK." },
        { char: ASSETS.char_alya, speaker: "Alya", text: "Woy! Budek ya dipanggilin dari tadi!" },
        { speaker: "Beryl", text: "Itu Alya. Tetangga sekaligus teman masa kecilku. Rambutnya dikuncir kuda seperti biasa." },
        
        // PERCABANGAN DIALOG (Bukan ending, tapi flavor text)
        { 
            choice: [
                { text: "Tungguin dia", target: "interaksi_alya_baik" },
                { text: "Jalan terus (Cuek)", target: "interaksi_alya_jahat" }
            ] 
        }
    ],

    "interaksi_alya_baik": [
        { action: () => gameState.stats.alya += 1 },
        { speaker: "Beryl", text: "Aku berhenti dan menoleh. Dia berlari kecil menghampiriku dengan napas terengah." },
        { speaker: "Alya", text: "Hah.. hah.. jahat banget sih ninggalin! Kita kan sekelas lagi tahun ini!" },
        { speaker: "Beryl", text: "Siapa suruh lambat. Kakimu pendek sih." },
        { speaker: "Alya", text: "Sembarangan! Kamu tuh yang jalannya kayak raksasa!" },
        { speaker: "Beryl", text: "Meskipun berisik, keberadaan Alya membuat pagi yang suram jadi sedikit berwarna." },
        { jump: "scene_gerbang_sekolah" }
    ],

    "interaksi_alya_jahat": [
        { action: () => gameState.stats.alya -= 1 },
        { speaker: "Beryl", text: "Aku pura-pura tidak dengar dan mempercepat langkah." },
        { speaker: "Alya", text: "HEH! JANGAN KABUR!" },
        { speaker: "Beryl", text: "Tiba-tiba tas punggungku ditarik dari belakang. Aku hampir terjengkang." },
        { speaker: "Alya", text: "Budek ya?! Pagi-pagi udah ngajak ribut!" },
        { jump: "scene_gerbang_sekolah" }
    ],

    "scene_gerbang_sekolah": [
        { bg: ASSETS.bg_sekolah, char: null, speaker: "Beryl", text: "SMA Harapan Bangsa. Gerbang besinya sudah terlihat." },
        { speaker: "Beryl", text: "Banyak siswa baru kelas 1 yang celingukan mencari kelas. Lucu juga melihat wajah polos mereka." },
        
        // Logic Check: Jika tadi telat bangun
        { 
            check: () => {
                if (gameState.flags.late_first_day) return "event_ditangkap_osis";
                else return "event_masuk_lancar";
            }
        }
    ],

    "event_masuk_lancar": [
        { speaker: "Beryl", text: "Untungnya aku datang tepat waktu. Gerbang masih terbuka lebar." },
        { speaker: "Alya", text: "Beryl, aku ke mading dulu ya mau liat pembagian kelas! Bye!" },
        { speaker: "Beryl", text: "Alya melesat pergi. Aku berjalan santai menuju koridor utama." },
        { jump: "chapter_1_selesai" }
    ],

    "event_ditangkap_osis": [
        { speaker: "Beryl", text: "Sial... Gerbang sudah setengah tertutup. Pak Satpam sudah memegang gembok." },
        { speaker: "Beryl", text: "Aku mencoba menyelinap lewat celah kecil..." },
        { speaker: "???", text: "Ehem. Mau kemana, Mas?" },
        { speaker: "Beryl", text: "Suara dingin yang menusuk tulang belakang. Matilah aku." },
        { char: ASSETS.char_bella, speaker: "Bella", text: "Dasi tidak rapi. Datang jam 07:01. Kamu niat sekolah tidak?" },
        { speaker: "Beryl", text: "Bella. Ketua OSIS legendaris yang konon tidak pernah tersenyum. Tatapannya setajam silet." },
        { 
            choice: [
                { text: "Maaf kak, tadi macet... (Bohong)", target: "bella_marah" },
                { text: "Saya kesiangan. Maaf. (Jujur)", target: "bella_netral" }
            ] 
        }
    ],

    "bella_marah": [
        { action: () => gameState.stats.bella -= 2 },
        { speaker: "Bella", text: "Rumah kamu di Blok C kan? Jalan kaki cuma 10 menit. Jangan cari alasan klise." },
        { speaker: "Beryl", text: "(Gila, dia tahu rumahku? Stalker?)" },
        { speaker: "Bella", text: "Namamu dicatat. Lari keliling lapangan 3 kali nanti istirahat. Masuk!" },
        { jump: "chapter_1_selesai" }
    ],

    "bella_netral": [
        { action: () => { gameState.stats.bella += 1; gameState.flags.met_bella = true; } },
        { speaker: "Bella", text: "Hmph. Setidaknya kamu jujur." },
        { speaker: "Bella", text: "Kali ini saya ampuni karena hari pertama. Rapikan dasimu. Pergi." },
        { speaker: "Beryl", text: "Dia memalingkan wajahnya. Apa aku salah lihat? Telinganya sedikit merah?" },
        { jump: "chapter_1_selesai" }
    ],

    "chapter_1_selesai": [
        { char: null, bg: "black", speaker: "", text: "--- CHAPTER 1 SELESAI ---" },
        { speaker: "System", text: "Ini adalah akhir dari demo pacing lambat." },
        { speaker: "System", text: "Untuk mencapai 30 menit, kamu tinggal copy-paste struktur ini dan tambahkan dialog sehari-hari." },
        { choice: [{ text: "Ulangi dari awal", target: "start" }] }
    ]
};

// --- ENGINE LOGIC (JANGAN UBAH BAGIAN INI KECUALI PAHAM) ---
let currentRoute = [];
let stepIndex = 0;

function startGame() {
    loadRoute("start");
}

function loadRoute(routeName) {
    currentRoute = script[routeName];
    stepIndex = 0;
    renderStep();
}

function renderStep() {
    if (stepIndex >= currentRoute.length) return;
    
    const step = currentRoute[stepIndex];

    // Cek Logic Jump/Check
    if (step.jump) { loadRoute(step.jump); return; }
    if (step.check) { loadRoute(step.check()); return; }
    if (step.action) { step.action(); stepIndex++; renderStep(); return; }

    // Tampilkan Gambar
    if (step.bg) document.getElementById('game-screen').style.backgroundImage = `url('${step.bg}')`;
    
    const charLayer = document.getElementById('char-layer');
    if (step.char !== undefined) { // Cek undefined biar bisa null (hilangkan char)
        charLayer.innerHTML = step.char ? `<img src="${step.char}" class="char-sprite">` : '';
    }

    // Tampilkan Teks
    if (step.choice) {
        showChoices(step.choice);
        document.getElementById('ui-layer').style.display = 'none'; // Sembunyikan teks saat milih
    } else {
        document.getElementById('ui-layer').style.display = 'flex';
        document.getElementById('name-box').innerText = step.speaker || "???";
        document.getElementById('name-box').style.display = step.speaker ? 'block' : 'none';
        document.getElementById('text-box').innerText = step.text;
    }
}

function nextText() {
    // Mencegah skip kalau lagi ada pilihan
    if (currentRoute[stepIndex].choice) return;
    
    stepIndex++;
    renderStep();
}

function showChoices(choices) {
    const overlay = document.getElementById('choice-overlay');
    overlay.innerHTML = "";
    overlay.style.display = "flex";

    choices.forEach(c => {
        const btn = document.createElement("button");
        btn.className = "choice-btn";
        btn.innerText = c.text;
        btn.onclick = () => {
            overlay.style.display = "none";
            loadRoute(c.target);
        };
        overlay.appendChild(btn);
    });
}

// Keyboard control (Spasi untuk lanjut)
document.addEventListener('keydown', function(event) {
    if (event.code === 'Space') {
        nextText();
    }
});

// Start
startGame();

</script>
</body>
</html>
